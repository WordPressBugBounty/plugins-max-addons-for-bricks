function mabLottie(){bricksQuerySelectorAll(document,".brxe-max-lottie").forEach(function(t){new MabLottie(t)})}MabLottie=function(t){this.element=t,this.id=this.element.getAttribute("data-element-id"),this.player=this.element.querySelector("#lottie-player-"+this.id),this.jsonSrc=this.player.src,this.lottie=this.player.getLottie(),this.firstFrame=this.lottie.firstFrame,this.totalFrames=this.lottie.totalFrames,this.newCycle=!0,this.playDirection="forward",this.observer=null,this.settings=this.element.getAttribute("data-settings"),this.settings=JSON.parse(this.settings),this.element.classList.contains("mab-backend")&&this.init(),this.lottie.addEventListener("DOMLoaded",this.init.bind(this)),this.lottie.addEventListener("complete",this.complete.bind(this))},MabLottie.prototype={id:"",element:"",settings:{},init:function(){this.firstFrame=this.lottie.firstFrame,this.totalFrames=this.lottie.totalFrames;var t=this.getOffset(),e=this.getFrameRange(),i=this.settings.selector&&""!==this.settings.selector?this.settings.selector:"#lottie-player-"+this.id,s=null,r=null,o=this.settings.trigger,n="yes"===this.settings.reverse;if(this.removeObserver(),"scroll"===o&&LottieInteractivity.create({player:"#lottie-player-"+this.id,container:"#lottie-player-"+this.id,mode:"scroll",actions:[{visibility:[0,t.bottom],type:"stop",frames:[e.start]},{visibility:[t.bottom,t.top],type:"seek",frames:[e.start,e.end]},{visibility:[t.top,1],type:"stop",frames:[e.end]}]}),"hover"===o){if(0===(s=bricksQuerySelectorAll(document,i)).length)return;(r=this.player.getLottie()).goToAndStop(e.start,!0),s.forEach(function(t){t.addEventListener("mouseenter",function(){r.setDirection(1),n?r.playSegments([e.end,e.start],!0):r.playSegments([e.start,e.end],!0)}),t.addEventListener("mouseleave",function(){r.setDirection(-1),r.play()})})}if("click"===o){if(0===(s=mabFrontend.domHelpers.querySelectorAll(i)).length)return;this.player.seek(e.start);var a=this.settings.onAnotherClick&&"replay"===this.settings.onAnotherClick,r=this.player.getLottie();s.forEach(function(t){t.addEventListener("click",function(){a&&r.stop(),n?r.playSegments([e.end,e.start],!0):r.playSegments([e.start,e.end],!0)})})}"cursor"===o&&LottieInteractivity.create({player:"#lottie-player-"+this.id,container:i,mode:"cursor",actions:[{position:{x:[0,1],y:[0,1]},type:"seek",frames:[e.start,e.end]}]}),"viewport"===o&&((r=this.player.getLottie()).setDirection(1),o=100-100*(1+t.top),t=100*t.bottom,this.player.seek(e.start),"undefined"==typeof IntersectionObserver?window.addEventListener("scroll",function(){this.lottie=this.player.getLottie(),mabFrontend.domHelpers.isInViewport(this.player)?this.playLottie():r.pause()}.bind(this)):(this.observer=mabFrontend.domHelpers.scrollObserver({offset:-t+"% 0% "+o+"%",callback:function(t){t.isInViewport?this.playLottie():r.pause()}.bind(this)}),this.observer.observe(this.player)))},complete:function(){this.newCycle=!0,this.element.dispatchEvent(new Event("max_lottie:complete")),"viewport"===this.settings.trigger&&("yes"===this.settings.loop&&"yes"!==this.settings.reverse&&this.playLottie(),"yes"===this.settings.loop&&"yes"===this.settings.reverse&&(this.playDirection="forward"===this.playDirection?"backward":"forward",this.playLottie()),"yes"!==this.settings.loop&&"yes"===this.settings.reverse&&(this.playDirection="backward"))},getOffset:function(){var t=this.settings.viewport;return{top:1-("undefined"==typeof(t=void 0===t?{top:1,bottom:0}:t).top?1:parseInt(t.top))/100,bottom:("undefined"==typeof t.bottom?0:parseInt(t.bottom))/100}},getFrames:function(){var t=this.getFrameRange(),e=0===this.lottie.firstFrame?this.lottie.currentFrame:this.lottie.firstFrame+this.lottie.currentFrame,i=this.firstFrame,s=0===this.firstFrame?this.totalFrames:this.firstFrame+this.totalFrames;return t.start&&t.start>i&&(i=t.start),t.end&&t.end<s&&(s=t.end),this.newCycle||"scroll"===this.settings.trigger||(i=t.start&&t.start>e?t.start:e),"backward"===this.playDirection&&"yes"===this.settings.reverse&&(i=e,s=t.start&&t.start>this.firstFrame?t.start:this.firstFrame),{first:i,last:s,current:e,total:this.totalFrames}},getFrameRange:function(){return{start:parseInt(this.settings.start)||0,end:parseInt(this.settings.end)||0}},playLottie:function(){var t=this.getFrames();this.lottie.stop(),this.lottie.playSegments([t.first,t.last],!0),this.newCycle=!1},removeObserver:function(){this.observer&&this.observer.unobserve(this.player)},start:function(){var e,i,t=this.settings.trigger;"click"===t&&(e="yes"===this.settings.reverse?-1:1,i="play",this.animation.addEventListener("click",t=>{this.lottie.setDirection(e),this.lottie.stop(),i="play"===i?(this.lottie.play(),"pause"):(this.lottie.pause(),"play"),e="yes"===this.settings.reverse?1:-1})),"hover"===t&&(e="yes"===this.settings.reverse?-1:1,this.animation.addEventListener("mouseenter",t=>{this.lottie.setDirection(e),this.lottie.play(),e="yes"===this.settings.reverse?1:-1}),this.animation.addEventListener("mouseleave",t=>{this.lottie.setDirection(e),this.lottie.play()}));var s=this.settings.viewport;(s=void 0===s?{top:100,bottom:0}:s).top="undefined"==typeof s.top?100:parseInt(s.top),s.bottom="undefined"==typeof s.bottom?0:parseInt(s.bottom),"viewport"===t&&(this.lottie.setDirection(1),this.observer=this.scrollObserver({offset:s.bottom+"% 0% "+s.top+"%",callback:function(t){t.isInViewport?(this.isInViewport=!0,this.lottie.play()):(this.isInViewport=!1,this.lottie.pause())}.bind(this)}),this.observer.observe(this.animation)),"scroll"===t&&(this.lottie.setDirection(1),this.observer=this.scrollObserver({offset:s.bottom+"% 0% "+s.top+"%",callback:function(t){t.isInViewport?(this.isInViewport=!0,t=this.getElementViewportPercentage(this.animation,s),t=Math.min(100,Math.max(0,t)),this.lottie.goToAndStop(t)):this.isInViewport=!1}.bind(this)}),this.observer.observe(this.player))}},document.addEventListener("DOMContentLoaded",function(t){bricksIsFrontend&&mabLottie()});