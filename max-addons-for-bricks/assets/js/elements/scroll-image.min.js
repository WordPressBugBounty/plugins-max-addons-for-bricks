class MabScrollImage{constructor(t){this.element=t,this.container=t.querySelector(".max-scroll-image-container"),this.settings=JSON.parse(this.container.getAttribute("data-settings")),this.direction=this.getDirection(),this.scrollOverlay=t.querySelector(".max-image-scroll-overlay"),this.verticalScroll=t.querySelector(".max-image-scroll-vertical"),this.imageScroll=t.querySelector(".max-scroll-image-container img"),this.init(),this.handleTrigger()}init(){var t=this.settings.trigger,e=this.checkReverse();"scroll"===t?"vertical"===this.direction?this.verticalScroll.classList.add("max-image-scroll-ver"):this.adjustOverlaySize():(e&&(this.element.classList.add("max-container-scroll-instant"),this.setTransform(),this.startTransform()),"vertical"===this.direction&&this.verticalScroll.classList.remove("max-image-scroll-ver"))}handleTrigger(){const e=this.settings.trigger,s=this.checkReverse();var t=t=>{t=t.target===this.element||this.element.contains(t.target),"click"===e&&t||"click"!==e?(this.element.classList.remove("max-container-scroll-instant"),this.setTransform(),this.toggleTransform(s)):this.toggleTransform(!s)};if("click"===e||"hover"===e){const i="click"===e?document.body:this.element;i.addEventListener("click"===e?"click":"mouseenter",t),"click"===e?document.body.addEventListener("click",t):this.element.addEventListener("mouseleave",()=>this.toggleTransform(!s))}else if("viewport"===e){const r=new IntersectionObserver(t=>{t.forEach(t=>{this.toggleBasedOnViewport(t,s)})},{threshold:.5});r.observe(this.element)}}toggleBasedOnViewport(t,e){this.element.classList.toggle("max-container-scroll-instant",!t.isIntersecting),this.setTransform(),this.toggleTransform(t.isIntersecting?e:!e)}adjustOverlaySize(){this.scrollOverlay&&(this.scrollOverlay.style.width=`${this.element.offsetWidth}px`,this.scrollOverlay.style.height=`${this.element.offsetHeight}px`)}getDirection(){var t=this.settings.direction;return["top","bottom"].includes(t)?"vertical":"horizontal"}checkReverse(){var t=this.settings.direction;return["bottom","right"].includes(t)}startTransform(){this.applyTransform(`-${this.settings.transformOffset}px`)}endTransform(){this.applyTransform("0px")}setTransform(){this.settings.transformOffset="vertical"===this.direction?this.imageScroll.offsetHeight-this.container.offsetHeight:this.imageScroll.offsetWidth-this.container.offsetWidth}applyTransform(t){this.imageScroll.style.transform=`${"vertical"===this.direction?"translateY":"translateX"}(${t})`}toggleTransform(t){t?this.endTransform():this.startTransform()}}document.addEventListener("DOMContentLoaded",()=>{window.bricksIsFrontend&&document.querySelectorAll(".brxe-max-scroll-image").forEach(t=>{new MabScrollImage(t)})});